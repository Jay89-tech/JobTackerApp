@model VisitorManagement.Models.DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
}

<link rel="stylesheet" href="~/css/index.css" asp-append-version="true" />


<div class="stats-grid">
    <div class="stat-card blue">
        <div class="stat-header">
            <div>
                <div class="stat-value">@Model.TotalVisitsToday</div>
                <div class="stat-label">Total Visits Today</div>
            </div>
            <div class="stat-icon blue">
                <i class="fas fa-calendar-check"></i>
            </div>
        </div>
    </div>

    <div class="stat-card yellow">
        <div class="stat-header">
            <div>
                <div class="stat-value">@Model.PendingVisits</div>
                <div class="stat-label">Pending Approvals</div>
            </div>
            <div class="stat-icon yellow">
                <i class="fas fa-clock"></i>
            </div>
        </div>
    </div>

    <div class="stat-card green">
        <div class="stat-header">
            <div>
                <div class="stat-value">@Model.ApprovedVisits</div>
                <div class="stat-label">Approved Visits</div>
            </div>
            <div class="stat-icon green">
                <i class="fas fa-check-circle"></i>
            </div>
        </div>
    </div>

    <div class="stat-card purple">
        <div class="stat-header">
            <div>
                <div class="stat-value">@Model.CheckedInVisitors</div>
                <div class="stat-label">Currently Checked In</div>
            </div>
            <div class="stat-icon purple">
                <i class="fas fa-user-check"></i>
            </div>
        </div>
    </div>
</div>

<div class="content-grid">
    <div class="content-card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-calendar-alt"></i>
                Today's Visits
            </h2>
            <a href="@Url.Action("Index", "Visits")" class="view-all-btn">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        @if (Model.RecentVisits != null && Model.RecentVisits.Any())
        {
            foreach (var visit in Model.RecentVisits.Take(5))
            {
                <div class="visit-item @visit.Status.ToLower()">
                    <div class="visit-header">
                        <div class="visitor-name">@visit.VisitorName</div>
                        <span class="status-badge @visit.Status.ToLower()">@visit.Status</span>
                    </div>
                    <div class="visit-info">
                        <div class="info-item">
                            <i class="fas fa-building"></i>
                            <span>@visit.VisitorCompany</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user"></i>
                            <span>Host: @visit.HostName</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-clock"></i>
                            <span>@visit.ExpectedArrivalTime.ToString("hh:mm tt")</span>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="empty-state">
                <i class="fas fa-calendar-times"></i>
                <p>No visits scheduled for today</p>
            </div>
        }
    </div>

    <div class="content-card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-qrcode"></i>
                Recent Check-Ins
            </h2>
            <a href="@Url.Action("Index", "CheckIns")" class="view-all-btn">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        @if (Model.RecentCheckIns != null && Model.RecentCheckIns.Any())
        {
            foreach (var checkIn in Model.RecentCheckIns)
            {
                <div class="checkin-item">
                    <div class="visitor-name">Visit ID: @checkIn.VisitId</div>
                    <div class="checkin-time">
                        <i class="fas fa-sign-in-alt"></i>
                        Checked in at @checkIn.CheckInTime.ToString("hh:mm tt")
                    </div>
                    <div class="visit-info" style="margin-top: 0.5rem;">
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>@checkIn.CheckInLocation</span>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="empty-state">
                <i class="fas fa-qrcode"></i>
                <p>No check-ins yet today</p>
            </div>
        }
    </div>
</div>