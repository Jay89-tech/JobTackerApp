@model List<Training>
@{
    ViewData["Title"] = "Training Programs";
}

<div class="page-header">
    <div>
        <h2>Training Management</h2>
        <p class="text-muted">Manage and track employee training programs</p>
    </div>
    <div class="header-actions">
        <a asp-action="Suggestions" class="btn btn-primary">
            <i class="fas fa-lightbulb"></i> Suggest Training
        </a>
        <a asp-action="Statistics" class="btn btn-info">
            <i class="fas fa-chart-bar"></i> Statistics
        </a>
    </div>
</div>

<!-- Filter -->
<div class="card filter-card mb-4">
    <div class="card-body">
        <form method="get" asp-action="Index">
            <div class="row g-3 align-items-end">
                <div class="col-md-4">
                    <label class="form-label">Status</label>
                    <select name="status" class="form-select">
                        <option value="">All Status</option>
                        <option value="Completed" selected="@(ViewBag.SelectedStatus == "Completed")">Completed</option>
                        <option value="In Progress" selected="@(ViewBag.SelectedStatus == "In Progress")">In Progress</option>
                        <option value="Planned" selected="@(ViewBag.SelectedStatus == "Planned")">Planned</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-filter"></i> Filter
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="stat-mini">
            <i class="fas fa-book stat-icon"></i>
            <div>
                <h4>@Model.Count</h4>
                <p>Total Programs</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-mini">
            <i class="fas fa-check-circle stat-icon text-success"></i>
            <div>
                <h4>@Model.Count(t => t.Status == "Completed")</h4>
                <p>Completed</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-mini">
            <i class="fas fa-spinner stat-icon text-info"></i>
            <div>
                <h4>@Model.Count(t => t.Status == "In Progress")</h4>
                <p>In Progress</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-mini">
            <i class="fas fa-calendar stat-icon text-warning"></i>
            <div>
                <h4>@Model.Count(t => t.Status == "Planned")</h4>
                <p>Planned</p>
            </div>
        </div>
    </div>
</div>

<!-- Trainings Table -->
<div class="card">
    <div class="card-body">
        @if (Model.Any())
        {
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Training Name</th>
                            <th>Employee</th>
                            <th>Provider</th>
                            <th>Status</th>
                            <th>Start Date</th>
                            <th>Type</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var training in Model)
                        {
                            <tr>
                                <td><strong>@training.TrainingName</strong></td>
                                <td>@ViewData[$"Employee_{training.EmployeeId}"]</td>
                                <td>@(training.Provider ?? "N/A")</td>
                                <td>
                                    @if (training.Status == "Completed")
                                    {
                                        <span class="badge bg-success">Completed</span>
                                    }
                                    else if (training.Status == "In Progress")
                                    {
                                        <span class="badge bg-info">In Progress</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-warning">Planned</span>
                                    }
                                </td>
                                <td>
                                    @if (training.StartDate.HasValue)
                                    {
                                        @training.StartDate.Value.ToString("MMM dd, yyyy")
                                    }
                                    else
                                    {
                                        <span class="text-muted">Not set</span>
                                    }
                                </td>
                                <td>
                                    @if (training.IsSuggestedByHR)
                                    {
                                        <span class="badge bg-primary">HR Suggested</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">Self Enrolled</span>
                                    }
                                </td>
                                <td class="text-center">
                                    <a asp-action="ByEmployee" asp-route-employeeId="@training.EmployeeId" class="btn btn-sm btn-info">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="text-center py-5">
                <i class="fas fa-book fa-3x text-muted mb-3"></i>
                <p class="text-muted">No training programs found.</p>
                <a asp-action="Suggestions" class="btn btn-primary">Suggest First Training</a>
            </div>
        }
    </div>
</div>

@section Styles {
    <style>
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .filter-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .stat-mini {
            background: white;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .stat-icon {
            font-size: 2.5rem;
            color: #667eea;
            margin-right: 20px;
        }

        .stat-mini h4 {
            margin: 0;
            font-size: 2rem;
            font-weight: 700;
        }

        .stat-mini p {
            margin: 0;
            color: #666;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
            border: none;
        }

        .table td {
            vertical-align: middle;
        }
    </style>
}